# Звіт по тестуванню

## 1. Покриття та ефективність тестів

### 1.1 Модульне тестування (Unit Testing)
**Бекенд:**
- **Покриття:** приблизно 24% інструкцій (загальний показник).
- **Результат:** 18 із 18 тестів пройшли успішно.
- **Охоплення:** Модуль `Books` покритий чудово (приблизно 88% коду).
- **Ефективність:** Висока для модуля `Books`. Для інших модулів — низька.

### 1.2 Інтеграційне та E2E тестування
**Бекенд (E2E/Integration):**
- **Результат:** 15 із 15 тестів пройшли успішно.
- **Охоплення:** Перевіряються критичні сценарії в модулях `Auth`, `Books`, `Cart` та `App`.
- **Ефективність:** Хороша. Ці тести підтверджують, що API-ендпоінти працюють коректно і правильно взаємодіють із базою даних.

**Фронтенд (E2E, використовую Playwright):**
- **Результат:** 8 із 8 тестів пройшли успішно.
- **Охоплення:** Перевірка авторизації (`Auth`), книг (`Books`), профілю (`Profile`) та базових переходів.
- **Ефективність:** Середня. Основні шляхи користувача покриті, але варто додати перевірку крайових випадків та складніших сценаріїв взаємодії.

### 1.3 Мутаційне тестування
**Ціль:** `src/books/books.service.ts`
- **Результат (Mutation Score):** 96.72%
- **Знищено "мутантів":** 59 із 61.
- **Суть мутації:** Перевірка !== null для minPrice та maxPrice була замінена на true.
- **Ефективність:** Надзвичайно висока. Набір тестів для сервісу `Books` дуже надійний і відловлює майже всі штучні баги. Ті два мутанти, що "вижили", стосувалися надлишкових перевірок на `null`.

## 2. Ефективність
- **Логіка Бекенду:** Модуль `Books` протестований зразково, оскільки у ньому використовуються юніт + мутаційні тести. Інші модулі поки що тримаються переважно на E2E тестах.
- **Цілісність системи:** E2E тести і на бекенді, і на фронтенді створюють гарну безпеку для головних функцій.
- **Логіка Фронтенду:** Повністю відсутні перевірки на рівні коду. Вся логіка UI покладається лише на E2E.

## 3. Приблизний список тестів

### 3.1 Юніт-тести бекенду
Ці тести ізолюють конкретні класи та методи використовуючи моки, щоб перевірити чисту бізнес-логіку.
* **BooksController**:
    * `findAll`: Перевіряє, чи повертається список книг та їх загальна кількість.
    * `getGenres`: Перевіряє отримання списку жанрів.
    * `getBookReviews`: Перевіряє повернення відгуків та деталей книги (або обробку ситуації, коли книги немає).
    * `findOne`: Перевіряє повернення конкретної книги або помилку 404, якщо її не знайдено.
* **BooksService**:
    * `findAll`: Перевіряє, чи повертається масив книг і чи коректно застосовуються фільтри (за жанром, пошуком, ціною).
    * `findOne`: Перевіряє повернення конкретної книги або `undefined`.
    * `getGenres`: Перевіряє повернення унікальних жанрів.

### 3.2 E2E тести бекенду
Ці тести проганяються по повноцінному додатку для перевірки API.
* **Auth (AuthController)**:
    * `POST /api/auth/register`: Успішна реєстрація нового користувача.
    * `POST /api/auth/login`: Успішний вхід існуючого користувача.
    * `GET /api/auth/profile/:userId`: Отримання профілю авторизованого юзера.
* **Books (BooksController)**:
    * `GET /api/books`: Отримання списку книг з пагінацією.
    * `GET /api/books/genres`: Отримання доступних жанрів.
    * `GET /api/books/:id`: Отримання деталей конкретної книги.
    * `GET /api/books/:id` (404): Перевірка помилки, якщо книги не існує.
* **Cart (CartController)**:
    * `POST /api/cart/:userId/items`: Додавання книги до кошика.
    * `GET /api/cart/:userId`: Перегляд вмісту кошика.
    * `PUT /api/cart/:userId/items/:bookId`: Зміна кількості товару в кошику.
    * `DELETE /api/cart/:userId/items/:bookId`: Видалення товару з кошика.
    * `DELETE /api/cart/:userId`: Повне очищення кошика.

### 3.3 E2E тести фронтенду (було використано Playwright)
Імітація дій реального користувача у браузері.
* **Авторизація**:
    * `should register a new user`: Заповнення форми реєстрації та відправка.
    * `should login with existing user`: Заповнення форми входу та відправка.
* **Управління книгами**:
    * `should display books list`: Перевірка, чи завантажується сторінка каталогу (зі списком книг або порожній стан).
    * `should filter books`: Тестування функціоналу пошуку та фільтрів.
* **Профіль користувача**:
    * `should display user profile`: Перевірка відображення даних юзера (ім'я, пошта) на сторінці профілю.
    * `should redirect to login if not authenticated`: Перевірка захисту роутів (чи перекидає на логін незареєстрованих).

## 4. Що ще потрібно зробити?

1.  **Додати юніт-тести на Фронтенд:** Потрібно написати тести для React-компонентів, використовуючи Jest + React Testing Library.
2.  **Підняти покриття на Бекенді:** Написати юніт-тести для сервісів `Auth`, `Users` та `Cart`, щоб вони відповідали рівню якості модуля `Books`.
3.  **Розширити E2E покриття:** Додайте більше сценаріїв для фронтенду, наприклад: обробка помилок, відсутність інтернету, перевірка адаптивності/мобільної версії.
4.  **Виправити помилки які були знайдені після тестування:** Додати специфічні кейси для `null` вхідних даних у `BooksService`.